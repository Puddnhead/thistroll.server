<?xml version="1.0"?>

<beans xsi:schemaLocation=" http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-4.1.xsd"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:c="http://www.springframework.org/schema/c"
       xmlns="http://www.springframework.org/schema/beans">

    <import resource="thistroll-data-beans.xml" />

    <bean id="com.thistroll.service.impl.blogservice" class="com.thistroll.service.impl.BlogServiceImpl"
        p:blogRepository-ref="com.thistroll.data.blogrepository"
        p:defaultPageSize="${blogs.defaultPageSize}"/>

    <bean id="com.thistroll.service.impl.userservice" class="com.thistroll.service.impl.UserServiceImpl"
        p:userRepository-ref="com.thistroll.data.userrepository" />

    <bean id="com.thistroll.service.impl.blogimagesservice" class="com.thistroll.service.impl.BlogImagesServiceImpl"
        p:bucketName="${blogImages.bucketName}"
        p:imageBucketUrl="${blogImages.bucketUrl}"
        p:s3ClientProvider-ref="com.thistroll.data.s3clientprovider" />

    <bean id="com.thistroll.service.impl.sessionservice" class="com.thistroll.service.impl.SessionServiceImpl"
          p:userService-ref="com.thistroll.service.impl.userservice"
          p:sessionExpirationInMillis="${session.expirationInMillis}" />

    <!-- Troll beans -->
    <bean id="com.thistroll.service.troll.impl.trollservice" class="com.thistroll.service.troll.impl.TrollServiceImpl"
        p:speechTypeResolver-ref="com.thistroll.service.troll.impl.speechtyperesolver"
        p:statementRandomResponseRepository-ref="com.thistroll.service.troll.repositories.statementrandomresponserepository"
        p:openEndedQuestionRandomResponseRepository-ref="com.thistroll.service.troll.repositories.openendedquestionrandomresponserepository"
        p:yesNoQuestionRandomResponseRepository-ref="com.thistroll.service.troll.repositories.yesnoquestionrepository" />

    <bean id="com.thistroll.service.troll.impl.speechtyperesolver"
        class="com.thistroll.service.troll.impl.SpeechTypeResolverImpl"
        c:printTree="false"/>

    <bean id="com.thistroll.service.troll.repositories.statementrandomresponserepository"
        class="com.thistroll.service.troll.repositories.StatementRandomResponseRepository" />

    <bean id="com.thistroll.service.troll.repositories.openendedquestionrandomresponserepository"
        class="com.thistroll.service.troll.repositories.OpenEndedQuestionRandomResponseRepository" />

    <bean id="com.thistroll.service.troll.repositories.yesnoquestionrepository"
        class="com.thistroll.service.troll.repositories.YesNoQuestionRandomResponseRepository" />
</beans>